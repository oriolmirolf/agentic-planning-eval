{
  "domain_prompt": "You are a planning agent that manages load balancing and autoscaling of services across servers.\n\nPrimitive actions you can use:\n- (power-on SERVER)\n- (power-off SERVER)\n- (start-service SERVER SERVICE)\n- (stop-service SERVER SERVICE)\n- (assign-bucket BUCKET SERVER REGION SERVICE)\n- (unassign-bucket BUCKET SERVER)\n\nSemantics and constraints:\n- Each bucket belongs to a region and requires a service.\n- Each server belongs to exactly one region and has a fixed capacity (maximum number of buckets it can handle).\n- (power-on s) turns a server online.\n- (power-off s) turns a server offline; you may only power off a server whose current load is zero (no buckets assigned).\n- (start-service s svc) makes server s run the given service (only if s is online).\n- (stop-service s svc) stops that service on s.\n- (assign-bucket b s r svc) assigns bucket b to server s if:\n  - b is currently unassigned,\n  - s is online,\n  - b and s are in the same region r,\n  - b requires service svc and s runs svc,\n  - load(s) is strictly less than capacity(s).\n  The effect is that b becomes assigned to s and load(s) increases by 1.\n- (unassign-bucket b s) removes bucket b from server s, making b unassigned and decreasing load(s) by 1.\n\nYour job is to read the problem description, reason about regions, services, servers, capacities, and traffic buckets, and then produce a valid plan that achieves the stated goal state while respecting all constraints at every step.\n\nOutput format:\n- Return only the list of primitive actions, one per line.\n- Do not include explanations or comments.\n- Use exactly the action names and argument symbols given in the problem (for example s1_us, eu_west, web, b3).",
  "problems": [
    {
      "id": "p01",
      "prompt": "Region: eu_west.\nService: search.\n\nServers:\n- s1_eu: region eu_west, capacity 3, online, runs search.\n- s2_eu: region eu_west, capacity 3, online, runs search.\n\nBuckets (all in eu_west, all require search):\n- b1, b2, b3.\n\nInitial state:\n- b1 is assigned to s1_eu.\n- b2 is assigned to s2_eu.\n- b3 is unassigned.\n\nGoal:\n- All three buckets must be assigned to servers in eu_west that run search.\n- All traffic should be consolidated onto a single server if possible.\n- In the final state, s2_eu must be powered off and carry no traffic.\n\nProduce a valid plan using the primitive actions (power-on, power-off, start-service, stop-service, assign-bucket, unassign-bucket), one action per line.",
      "optimal_cost": null
    },
    {
      "id": "p02",
      "prompt": "Region: us_east.\nServices: payments, search.\n\nServers:\n- s1_us: region us_east, capacity 3, online, runs payments.\n- s2_us: region us_east, capacity 3, online, runs search.\n\nBuckets (all in us_east):\n- b1: requires payments.\n- b2: requires payments.\n- b3: requires search.\n\nInitial state:\n- No buckets are assigned.\n\nGoal:\n- Every bucket is assigned to a server in us_east that runs the required service.\n- No server exceeds its capacity.\n- You do not need to change which services run on which servers unless necessary.\n\nProduce a valid plan as a list of primitive actions, one per line.",
      "optimal_cost": null
    },
    {
      "id": "p03",
      "prompt": "Region: ap_south.\nServices: analytics, search.\n\nServers:\n- s1_ap: region ap_south, capacity 3, online, initially runs search only.\n\nBuckets (all in ap_south):\n- b1: requires analytics.\n- b2: requires search.\n\nInitial state:\n- b1 and b2 are unassigned.\n- s1_ap is online and runs search but not analytics.\n\nGoal:\n- Both buckets must be assigned to s1_ap.\n- b1 must be handled by analytics, b2 by search.\n- Capacity and all other constraints must be respected.\n\nProduce a valid plan (for example by starting analytics on s1_ap and assigning both buckets), as a sequence of primitive actions.",
      "optimal_cost": null
    },
    {
      "id": "p04",
      "prompt": "Region: eu_west.\nService: web.\n\nServers (capacity 2 each):\n- s1_eu: region eu_west, online, runs web.\n- s2_eu: region eu_west, online, runs web.\n- s3_eu: region eu_west, offline, runs nothing initially.\n\nBuckets (all in eu_west, all require web):\n- b1, b2, b3, b4.\n\nInitial state:\n- b1 and b2 are assigned to s1_eu (s1_eu is full).\n- b3 and b4 are assigned to s2_eu (s2_eu is full).\n- s3_eu is powered off.\n\nGoal:\n- All four buckets must remain served by web in eu_west.\n- Server s2_eu must be drained of traffic and powered off in the final state.\n- At no point may any server exceed its capacity of 2 buckets.\n\nProduce a valid plan that may power on s3_eu, move buckets, and shut down s2_eu, using the primitive actions.",
      "optimal_cost": null
    },
    {
      "id": "p05",
      "prompt": "Regions: us_east, eu_west.\nService: search.\n\nServers:\n- s1_us: region us_east, capacity 3, online, runs search.\n- s2_eu: region eu_west, capacity 2, online, runs search.\n- s3_eu: region eu_west, capacity 2, offline, runs nothing initially.\n\nBuckets:\n- b1, b2: require search in us_east.\n- b3, b4: require search in eu_west.\n\nInitial state:\n- b1 is assigned to s1_us (correct region).\n- b3 is incorrectly assigned to s1_us in us_east (wrong region for b3).\n- b2 and b4 are unassigned.\n\nGoal:\n- Each bucket must be served by a server in its own region that runs search.\n- Prefer to satisfy all eu_west buckets using s2_eu if its capacity allows.\n- No server may exceed its capacity at any time.\n\nProduce a valid plan that fixes the cross-region misrouting and assigns all buckets appropriately, using the primitive actions.",
      "optimal_cost": null
    },
    {
      "id": "p06",
      "prompt": "Region: us_east.\nServices: payments, search.\n\nServers (capacity 3 each):\n- s1_us: region us_east, online, runs payments only.\n- s2_us: region us_east, online, runs search only.\n\nBuckets (all in us_east):\n- b1, b2: require payments.\n- b3, b4: require search.\n\nInitial state:\n- b1 and b2 are assigned to s1_us (load 2, one free slot).\n- b3 is assigned to s2_us (load 1, two free slots).\n- b4 is unassigned.\n\nGoal:\n- All four buckets must be served in us_east by servers running the correct service.\n- In the final state, all buckets should run on s1_us only, and s2_us must be powered off.\n- Capacity constraints must be respected at all times.\n\nProduce a valid plan that starts search on s1_us, migrates traffic, and safely powers off s2_us.",
      "optimal_cost": null
    },
    {
      "id": "p07",
      "prompt": "Region: eu_central.\nService: web.\n\nServers (capacity 3 each, all initially online and running web):\n- s1_eu, s2_eu, s3_eu.\n\nBuckets (all in eu_central, all require web):\n- b1, b2, b3, b4, b5.\n\nInitial state:\n- b1, b2, b3 are assigned to s1_eu (s1_eu is full).\n- b4 is assigned to s2_eu (load 1).\n- b5 is assigned to s3_eu (load 1).\n\nGoal:\n- All five buckets must remain served by web in eu_central.\n- Server s3_eu must be completely drained of traffic and powered off in the final state.\n- Other servers must not exceed their capacity of 3 buckets at any point.\n\nProduce a valid plan that redistributes buckets across s1_eu and s2_eu and then powers off s3_eu.",
      "optimal_cost": null
    },
    {
      "id": "p08",
      "prompt": "Regions: us_east, eu_west.\nServices: search, ads.\n\nServers (capacity 3 each):\n- s1_us: region us_east, online, runs search only.\n- s2_us: region us_east, online, runs search and ads.\n- s3_eu: region eu_west, online, runs search only.\n- s4_eu: region eu_west, offline, runs nothing initially.\n\nBuckets:\n- b1, b2: search buckets in us_east.\n- b3: ads bucket in us_east.\n- b4, b5: search buckets in eu_west.\n- b6: ads bucket in eu_west.\n\nInitial state:\n- b1 is assigned to s1_us.\n- b2 and b3 are assigned to s2_us.\n- b4 is incorrectly assigned to s1_us (it should be in eu_west).\n- b5 and b6 are unassigned.\n\nGoal:\n- All buckets must be served in their own region by servers running the correct service.\n- In the final state, s1_us must be fully drained and powered off (us_east should rely on s2_us only).\n- In eu_west, decide whether to rely only on s3_eu or to power on and configure s4_eu, but all three eu_west buckets (b4, b5, b6) must be served.\n- No server may exceed its capacity at any time.\n\nProduce a valid plan of primitive actions that fixes cross-region misrouting, introduces any needed ads service in eu_west, and decommissions s1_us.",
      "optimal_cost": null
    },
    {
      "id": "p09",
      "prompt": "Regions: us_east, ap_south.\nServices: payments, search, analytics.\n\nServers:\n- s1_us: region us_east, capacity 4, online, runs payments and search.\n- s2_us: region us_east, capacity 2, online, runs analytics.\n- s3_ap: region ap_south, capacity 3, online, runs search only.\n- s4_ap: region ap_south, capacity 3, offline, runs nothing initially.\n\nBuckets:\n- b1, b2: payments buckets in us_east.\n- b3: analytics bucket in us_east.\n- b4, b5: search buckets in us_east.\n- b6: search bucket in ap_south.\n- b7: payments bucket in ap_south.\n\nInitial state:\n- b1 and b4 are assigned to s1_us.\n- b2 and b3 are assigned to s2_us (s2_us is full).\n- b5 is incorrectly assigned to s3_ap (it should be in us_east).\n- b6 is unassigned.\n- b7 is incorrectly assigned to s1_us (it should be in ap_south).\n\nGoal:\n- All buckets must be served in their correct regions by servers running the correct services.\n- Analytics should only run where it is needed for us_east traffic.\n- Payments must be available in both regions, so ap_south must end up with at least one server running payments.\n- In the final state, no server should host more than 3 buckets, even if its capacity is 4, and capacity constraints must hold throughout.\n\nProduce a valid plan that fixes misrouted buckets, introduces payments capability in ap_south, and rebalances load without overloading any server.",
      "optimal_cost": null
    },
    {
      "id": "p10",
      "prompt": "Regions: us_east, eu_west, ap_south.\nServices: web, api.\n\nServers (capacity 3 each):\n- s1_us: region us_east, online, runs web and api.\n- s2_us: region us_east, online, runs web only.\n- s3_eu: region eu_west, online, runs web and api.\n- s4_eu: region eu_west, offline, runs nothing initially.\n- s5_ap: region ap_south, online, runs web only.\n- s6_ap: region ap_south, offline, runs nothing initially.\n\nBuckets:\n- us_east: b1, b2 (web), b3 (api).\n- eu_west: b4 (web), b5, b6 (api).\n- ap_south: b7 (web), b8, b9 (api).\n\nInitial state:\n- b1, b2, b3 are assigned to s1_us (s1_us is full).\n- b4 and b5 are assigned to s3_eu (one free slot).\n- b6 is unassigned.\n- b7 is assigned to s5_ap.\n- b8 and b9 are unassigned.\n- s4_eu and s6_ap are offline.\n\nGoal:\n- All buckets must be served in their correct regions by servers running the required service.\n- In the final state, each region must have exactly one online server:\n  - one in us_east,\n  - one in eu_west,\n  - one in ap_south.\n- You must consolidate traffic per region and decide which server to keep in each region, possibly powering on an offline server and shutting down another.\n- No server may ever host more than 3 buckets.\n\nProduce a valid plan of primitive actions that performs the necessary autoscaling and traffic moves so that each region ends up with a single appropriately configured server handling all of its web and api traffic.",
      "optimal_cost": null
    }
  ]
}
